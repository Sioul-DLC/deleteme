{"openapi":"3.0.0","paths":{"/affiliations":{"post":{"operationId":"AffiliationsController_initializeAffiliation","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitializeAffiliationRequestDto"}}}},"responses":{"201":{"description":"Search results matching criteria","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitializeAffiliationResponseDto"}}}},"400":{"description":"Bad Request Exception","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunctionalError"}}}}}}},"/affiliations/{keyGuid}/personaldata":{"put":{"operationId":"AffiliationsController_updateAffiliation","parameters":[{"name":"keyGuid","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAffiliationRequestDto"}}}},"responses":{"200":{"description":"Search results matching criteria","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAffiliationResponseDto"}}}},"400":{"description":"\n    Possible specific error codes\n    * SEX_CODE_REQUIRED - indicates that niss or sexe is required. \n    * OLD_OA_REQUIRED - indicates that currentInsurerInformation.foreignIsuranceName must be filled if currentInsurerInformation.mutu is empty\n    * FOREIGN_COUNTRY_REQUIRED - indicates that currentInsurerInformation.foreignInsurerCountry must be filled if currentInsurerInformation.foreignInsuranceName is filled\n    * TERRITORY_REQUIRED - indicates that the territory could not be determined by the API with the information provided. The information is therefore requested. However, the API returns a proposal in the \"errorMessage\" field\n    * ALREADY_AFFILIATED - means that user is already affiliated as titular. Affiliation forbidden.\n    * IS_DIPLOMATIC_MEMBER - means that diplomat member are not able to make an affiliation.\n    * MISSING_DATA_TO_RECONTACT - means that user want to be recontacted but no contact data was found","schema":{"example":{"httpCode":400,"httpMessage":"Bad Request Exception","moreInformation":{"errorCode":"SEX_CODE_REQUIRED","errorMessage":"SEX_CODE_REQUIRED","fieldName":""}}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunctionalError"}}}}}}},"/affiliations/{keyGuid}/recontact":{"post":{"operationId":"AffiliationsController_recontact","parameters":[{"name":"keyGuid","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""},"400":{"description":"\n    Possible specific error codes\n    * MISSING_DATA_TO_RECONTACT - means that user want to be recontacted but no contact data was found","schema":{"example":{"httpCode":400,"httpMessage":"Bad Request Exception","moreInformation":{"errorCode":"MISSING_DATA_TO_RECONTACT","errorMessage":"MISSING_DATA_TO_RECONTACT","fieldName":""}}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunctionalError"}}}}}}},"/affiliations/{keyGuid}/request":{"post":{"operationId":"AffiliationsController_request","parameters":[{"name":"keyGuid","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestAffiliationRequestDto"}}}},"responses":{"200":{"description":""},"400":{"description":"\n    Possible specific error codes\n    * ALREADY_ENDED - means that the record from tabMutation is already marked as ended\n    * MISSING_DATA_FOR_REQUEST_AFFILIATION - means that there is missing information in the TabMutation table to allow the affiliation request\n    * FILE_NOT_GENERATED_WITHIN_ALLOTED_TIME - means that the file seems to have been generated by StreamServe but was not present in the directory after the timeout\n    * ERROR_ON_PREIMMATRICULATION - means that an error occurred when calling the pre-registration methods of the Popu service","schema":{"example":{"httpCode":400,"httpMessage":"Bad Request Exception","moreInformation":{"errorCode":"MISSING_DATA_FOR_REQUEST_AFFILIATION","errorMessage":"MISSING_DATA_FOR_REQUEST_AFFILIATION","fieldName":"typeDemande"}}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunctionalError"}}}}}}},"/affiliations/{keyGuid}/bulletin":{"get":{"operationId":"AffiliationsController_getBulletin","parameters":[{"name":"keyGuid","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Get the affiliation document PDF for the specific key guid record"},"400":{"description":"\n    Possible specific error codes\n    * MISSING_DATA_FOR_REQUEST_AFFILIATION - means that there is missing information in the TabMutation table to allow the affiliation request\n    * FILE_NOT_GENERATED_WITHIN_ALLOTED_TIME - means that the file seems to have been generated by StreamServe but was not present in the directory after the timeout","schema":{"example":{"httpCode":400,"httpMessage":"Bad Request Exception","moreInformation":{"errorCode":"FILE_NOT_GENERATED_WITHIN_ALLOTED_TIME","errorMessage":"FILE_NOT_GENERATED_WITHIN_ALLOTED_TIME","fieldName":""}}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FunctionalError"}}}}}}}},"info":{"title":"Solidaris affiliation API","description":"Solidaris API for affiliation","version":"1.5.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"FunctionalErrorItem":{"type":"object","properties":{"errorCode":{"type":"string"},"fieldName":{"type":"string"},"errorMessage":{"type":"string"}},"required":["errorCode","fieldName","errorMessage"]},"FunctionalError":{"type":"object","properties":{"httpCode":{"type":"number"},"httpMessage":{"type":"string"},"moreInformation":{"$ref":"#/components/schemas/FunctionalErrorItem"}},"required":["httpCode","httpMessage","moreInformation"]},"UserDto":{"type":"object","properties":{"firstname":{"type":"string","maxLength":50},"lastname":{"type":"string","maxLength":50},"birthDate":{"type":"string","description":"The user birth date, should be iso 8601 compatible (eg :  1999-12-25)"},"phoneNumber":{"type":"string"},"email":{"type":"string","maxLength":50}},"required":["firstname","lastname","birthDate"]},"InitializeAffiliationRequestDto":{"type":"object","properties":{"user":{"description":"The user to create.","allOf":[{"$ref":"#/components/schemas/UserDto"}]}},"required":["user"]},"InitializeAffiliationResponseDto":{"type":"object","properties":{"guid":{"type":"string","description":"Search results matching criteria"}},"required":["guid"]},"PaymentInfoDto":{"type":"object","properties":{"iban":{"type":"string","description":"The user IBAN","maxLength":50},"bic":{"type":"string","description":"The user BIC","maxLength":50},"bankAccountHolder":{"type":"string","description":"The user bank account holder name","maxLength":70},"paymentMethod":{"type":"string","enum":["directDebit","bankTransfert"]},"paymentFrequency":{"type":"string","enum":["monthly","quarterly","semiAnnually","annually"]}},"required":["iban","bankAccountHolder"]},"DependentDto":{"type":"object","properties":{"firstname":{"type":"string","maxLength":50},"lastname":{"type":"string","maxLength":50},"birthDate":{"type":"string","description":"The user birth date, should be iso 8601 compatible (eg :  1999-12-25)"},"legalBondWithTitular":{"type":"string","description":"The family relationship with the holder","enum":["child","spouse","cohabiting","parent"]}},"required":["firstname","lastname","birthDate","legalBondWithTitular"]},"AddressDto":{"type":"object","properties":{"streetName":{"type":"string"},"streetNumber":{"type":"string"},"streetNumberBox":{"type":"string"},"postalCode":{"type":"string"},"locality":{"type":"string"},"country":{"type":"string","enum":["Afghanistan","AfriqueDuSud","Albanie","Algerie","Allemagne","Andorre","Angola","Anguilla","ArabieSaoudite","Argentine","Armenie","Australie","Autriche","Azerbaidjan","Bahamas","Bahrein","Bangladesh","Barbade","Belarus","Belgique","Belize","Benin","Bermudes","Bhoutan","Bolivie","BosnieHerzegovine","Botswana","Bresil","BruneiDarussalam","Bulgarie","BurkinaFaso","Burundi","IlesCaimans","Cambodge","Cameroun","Canada","IlesCanaries","CapVert","Chili","Chine","Colombie","Comores","RepubliqueDemocratiqueDuCongo","RepubliqueDuCongo","IlesCook","CoreeDuNord","CoreeDuSud","CostaRica","CoteDIvoire","Croatie","Cuba","Danemark","Djibouti","Dominique","Egypte","ElSalvador","EmiratsArabesUnis","Equateur","Erythree","Espagne","Estonie","EtatsUnis","Ethiopie","IlesFeroe","Fidji","Finlande","France","Gabon","Gambie","Georgie","Ghana","Gibraltar","Grece","Grenade","Groenland","Guadeloupe","Guam","Guatemala","Guinee","GuineeEquatoriale","GuineeBissau","Guyana","GuyaneFran√ßaise","Haiti","Honduras","RASChinoiseDeHongKong","Hongrie","Inde","Indonesie","Iran","Iraq","Irlande","Islande","Israel","Italie","Jamaique","Japon","Jordanie","Kazakhstan","Kenya","Kirghizistan","Kosovo","Koweit","Laos","Lesotho","Lettonie","Liban","Liberia","Libye","Liechtenstein","Lituanie","Luxembourg","RASChinoiseDeMacao","Madagascar","Madere","Malaisie","Malawi","Maldives","Mali","IlesMalouines","Malte","Maroc","Martinique","Maurice","Mauritanie","Mexique","Moldavie","Monaco","Mongolie","Montenegro","Montserrat","Mozambique","Myanmar","Namibie","Nauru","Nepal","Nicaragua","Niger","Nigeria","Niue","Norvege","NouvelleCaledonie","NouvelleZelande","Oman","Ouganda","Ouzbekistan","Pakistan","Panama","PapouasieNouvelleGuinee","Paraguay","PaysBas","Perou","Philippines","Pitcairn","Pologne","PortoRico","Portugal","Qatar","RepubliqueCentrafricaine","RepubliqueDeMacedoineDuNord","RepubliqueDominicaine","RepubliqueTcheque","Reunion","Roumanie","RoyaumeUni","Russie","Rwanda","SaintMarin","SaintVincentEtLesGrenadines","SainteHelene","SainteLucie","IlesSalomon","Samoa","SamoaAmericaines","SaoTomeEtPrincipe","Senegal","Serbie","Seychelles","SierraLeone","Singapour","Slovaquie","Slovenie","Somalie","Soudan","SriLanka","Suede","Suisse","Suriname","Swaziland","Syrie","Tadjikistan","Taiwan","Tanzanie","Tchad","TerritoirePalestinien","Thailande","TimorOriental","Togo","Tokelau","Tonga","TriniteEtTobago","Tunisie","Turkmenistan","IlesTurksEtCaiques","Turquie","Tuvalu","Ukraine","Uruguay","Vanuatu","EtatDeLaCiteDuVatican","Venezuela","VietNam","WallisEtFutuna","Yemen","Zambie","Zimbabwe"]}},"required":["streetName","streetNumber","postalCode","locality","country"]},"InsurerDto":{"type":"object","properties":{"foreignInsuranceName":{"type":"string","maxLength":255,"description":"Foreign insurer name. Must be filled if mutu is empty"},"mutu":{"type":"string","enum":["territory_100","territory_200","territory_300","territory_304","territory_306","territory_309","territory_311","territory_322","territory_323","territory_400","territory_500","territory_600","territory_900"],"description":"Belgian insurance organisme. Must be filled if foreignIsuranceName is empty"},"foreignInsurerCountry":{"type":"string","maxLength":60,"description":"Country of foreign insurer. Must be filled if foreignInsuranceName is filled"}}},"UpdateAffiliationRequestDto":{"type":"object","properties":{"baseFields":{"description":"The base information for the affiliation.","allOf":[{"$ref":"#/components/schemas/UserDto"}]},"isTitular":{"type":"boolean"},"nationality":{"type":"string","maxLength":50},"niss":{"type":"string","description":"The user national registry number","maxLength":50},"civilState":{"type":"string","description":"The user civil state","enum":["single","cohabiting","legalCohabiting","married","separated","divorced","widow"]},"employmentStatus":{"type":"string","description":"","enum":["employee","worker","publicServiceAgent","independent","widow","unemployed","pensioner","borderer","nationalRegistryHolder","handicapped","diplomat","other"]},"specificEmploymentStatus":{"type":"string","maxLength":40},"paymentInfo":{"description":"The user payment information","allOf":[{"$ref":"#/components/schemas/PaymentInfoDto"}]},"dependents":{"description":"The list of possible dependents.","type":"array","items":{"$ref":"#/components/schemas/DependentDto","maxLength":9}},"address":{"$ref":"#/components/schemas/AddressDto"},"currentInsurerInformation":{"$ref":"#/components/schemas/InsurerDto"},"sexe":{"type":"string","enum":["M","F"]},"territory":{"type":"string","description":"The territory of the user","enum":["FEDE_305","FEDE_315","FEDE_317","FEDE_319","FEDE_325"]},"wantToBeRecontacted":{"type":"boolean","description":"Indicates to call the recontact method within the current call"}},"required":["baseFields","wantToBeRecontacted"]},"UpdateAffiliationResponseDto":{"type":"object","properties":{"guid":{"type":"string","description":"Search results matching criteria"}},"required":["guid"]},"SMAAddressDto":{"type":"object","properties":{"streetAndHouseNumber":{"type":"string"},"postalCode":{"type":"string"},"locality":{"type":"string"}},"required":["streetAndHouseNumber","postalCode","locality"]},"TitularDto":{"type":"object","properties":{"niss":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"birthdate":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"contactByEmail":{"type":"string"},"contactByPhone":{"type":"string"},"isMember":{"type":"string"},"isInsured":{"type":"string"},"paymentMode":{"type":"string"},"paymentFrequency":{"type":"string"},"address":{"$ref":"#/components/schemas/SMAAddressDto"}},"required":["niss","firstname","lastname","birthdate","email","phone","contactByEmail","contactByPhone","isMember","isInsured","paymentMode","paymentFrequency","address"]},"FamilyMembersAgesDto":{"type":"object","properties":{"familyMembersAge":{"type":"number"}},"required":["familyMembersAge"]},"SMAOption":{"type":"object","properties":{"name":{"type":"string"},"variation":{"type":"string"}},"required":["name"]},"SMAInsuranceOptionDto":{"type":"object","properties":{"option":{"$ref":"#/components/schemas/SMAOption"}},"required":["option"]},"SMAInsurance":{"type":"object","properties":{"name":{"type":"string"},"options":{"type":"array","items":{"$ref":"#/components/schemas/SMAInsuranceOptionDto"}}},"required":["name"]},"SMAInsuranceDto":{"type":"object","properties":{"insurance":{"$ref":"#/components/schemas/SMAInsurance"}},"required":["insurance"]},"SMAQuotationRequestDto":{"type":"object","properties":{"titular":{"$ref":"#/components/schemas/TitularDto"},"familyMembersAges":{"type":"array","items":{"$ref":"#/components/schemas/FamilyMembersAgesDto"}},"insurances":{"type":"array","items":{"$ref":"#/components/schemas/SMAInsuranceDto"}}},"required":["titular","insurances"]},"RequestAffiliationRequestDto":{"type":"object","properties":{"sendByPaperMail":{"type":"boolean","description":"Indicates whether you want to send the mail by letter or not"},"smaQuotationRequest":{"description":"Insurance information to be sent to DataPower","allOf":[{"$ref":"#/components/schemas/SMAQuotationRequestDto"}]}},"required":["sendByPaperMail"]}}}}
